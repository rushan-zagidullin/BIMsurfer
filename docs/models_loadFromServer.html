<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Example</title>
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
    <script>
        var require = {
            baseUrl: "../",
            urlArgs: ""
//            urlArgs: "bust=" + new Date().getTime()
        };
    </script>
    <script type="text/javascript" src="../bimsurfer/lib/require.js"></script>
    <script type="text/javascript" type="module">
    	import("http://localhost:8082/apps/bimserverjavascriptapi/bimserverclient.js").then((bimserverapi) => {
    		console.log(bimserverapi);
    		
    		window.BimServerClient = bimserverapi.default;
            require(
                ["bimsurfer/src/BimSurfer"],
                function (BimSurfer) {
                    window.bimSurfer = new BimSurfer({
                        domNode: "fullPageContainer"
                    });
                    bimSurfer.load({
                        bimserver: "http://localhost:8082",
                        username: "admin@example.org",
                        password: "admin",
                        poid: 4784129,
                        roid: 11534339,
                        schema: "ifc2x3tc1" // < TODO: Deduce automatically
                    }).then(function (model) {
                        console.info('loaded model:', model);
                        model.getTree().then(function (tree) {
                            console.info('tree:', tree)
                        });
                        // Model is now loaded and rendering.
                        // The following sections show what you can do with BIMSurfer at this point.
                        //...
                    });
                }
            );
        });
    </script>

</head>
<body>
<div id="info">
    <h1>Loading a model from a BIMServer</h1>
</div>
<div style="position: absolute; top: 0; left: 0; width:100%; height: 100%;" id="fullPageContainer"></div>
</body>
</html>